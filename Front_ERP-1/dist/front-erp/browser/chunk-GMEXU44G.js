import{b as F,i as I}from"./chunk-X65L4GQW.js";import{a as q,b as G,c as V,d as A,e as O,f as H,g as U}from"./chunk-PEWZVKZC.js";import{a as z,b as J,e as K,h as Q,i as W,j as X,k as Y}from"./chunk-WGOZBQ6C.js";import{b as P,d as p,f as T,g as N,j as w,m as D,n as R,r as k,s as B}from"./chunk-25KKNSP5.js";import{a as ot,b as nt}from"./chunk-GZNJA4L5.js";import{a as j,c as et,d as it}from"./chunk-TIT22AFP.js";import{$ as tt,Z,_ as $,xa as rt}from"./chunk-BAV5PXE6.js";import{p as L}from"./chunk-C42ID75Y.js";import{$a as r,Db as i,Eb as o,Fa as x,Fb as M,Ob as b,Qb as E,Yb as n,Zb as v,bc as y,ia as d,mb as _,na as S,sb as c,ub as C,zb as a}from"./chunk-HI7W2E7R.js";function at(t,l){t&1&&(i(0,"mat-error"),n(1,"El correo es obligatorio"),o())}function lt(t,l){t&1&&(i(0,"mat-error"),n(1,"Correo inv\xE1lido"),o())}function mt(t,l){t&1&&(i(0,"mat-error"),n(1,"La contrase\xF1a es obligatoria"),o())}function st(t,l){t&1&&(i(0,"mat-error"),n(1,"M\xEDnimo 6 caracteres"),o())}function dt(t,l){if(t&1&&(i(0,"p",9),n(1),o()),t&2){let u=E();r(),v(u.errorLogin())}}function ut(t,l){t&1&&M(0,"mat-spinner",11)}function ct(t,l){t&1&&n(0," Iniciar sesi\xF3n ")}var kt=(()=>{class t{constructor(){this.auth=d(I),this.router=d(F),this.notify=d(rt),this.fb=d(k),this.destroyRef=d(x),this.ocultarPass=_(!0),this.cargando=_(!1),this.errorLogin=_(null),this.form=this.fb.nonNullable.group({correo:["",[p.required,p.email]],contrasena:["",[p.required,p.minLength(6)]]})}onLogin(){this.form.invalid||(this.cargando.set(!0),this.errorLogin.set(null),this.auth.login(this.form.getRawValue()).pipe(j(this.destroyRef)).subscribe({next:()=>{this.notify.exito("Bienvenido"),this.router.navigate(["/dashboard"])},error:u=>{this.cargando.set(!1);let m=u?.error?.error?.mensaje||"Credenciales inv\xE1lidas";this.errorLogin.set(m)}}))}static{this.\u0275fac=function(m){return new(m||t)}}static{this.\u0275cmp=S({type:t,selectors:[["app-login"]],standalone:!0,features:[y],decls:32,vars:10,consts:[[1,"login-wrapper"],[1,"login-card"],["mat-card-avatar","",1,"text-indigo-500","text-4xl"],[1,"flex","flex-col","gap-4","mt-6",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","formControlName","correo","type","email","autocomplete","email"],["matSuffix",""],["matInput","","formControlName","contrasena","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button","aria-label","Mostrar u ocultar contrase\xF1a",3,"click"],["role","alert",1,"text-red-600","text-sm","text-center"],["mat-raised-button","","color","primary","type","submit",1,"h-12",3,"disabled"],["diameter","20"]],template:function(m,e){if(m&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-icon",2),n(4,"store"),o(),i(5,"mat-card-title"),n(6,"ERP POS"),o(),i(7,"mat-card-subtitle"),n(8,"Inicia sesi\xF3n para continuar"),o()(),i(9,"mat-card-content")(10,"form",3),b("ngSubmit",function(){return e.onLogin()}),i(11,"mat-form-field",4)(12,"mat-label"),n(13,"Correo electr\xF3nico"),o(),M(14,"input",5),i(15,"mat-icon",6),n(16,"mail"),o(),c(17,at,2,0,"mat-error")(18,lt,2,0,"mat-error"),o(),i(19,"mat-form-field",4)(20,"mat-label"),n(21,"Contrase\xF1a"),o(),M(22,"input",7),i(23,"button",8),b("click",function(){return e.ocultarPass.set(!e.ocultarPass())}),i(24,"mat-icon"),n(25),o()(),c(26,mt,2,0,"mat-error")(27,st,2,0,"mat-error"),o(),c(28,dt,2,1,"p",9),i(29,"button",10),c(30,ut,1,0,"mat-spinner",11)(31,ct,1,0),o()()()()()),m&2){let s,f,g,h;r(10),C("formGroup",e.form),r(7),a(17,(s=e.form.get("correo"))!=null&&s.hasError("required")&&((s=e.form.get("correo"))!=null&&s.touched)?17:-1),r(),a(18,(f=e.form.get("correo"))!=null&&f.hasError("email")&&((f=e.form.get("correo"))!=null&&f.touched)?18:-1),r(4),C("type",e.ocultarPass()?"password":"text"),r(3),v(e.ocultarPass()?"visibility_off":"visibility"),r(),a(26,(g=e.form.get("contrasena"))!=null&&g.hasError("required")&&((g=e.form.get("contrasena"))!=null&&g.touched)?26:-1),r(),a(27,(h=e.form.get("contrasena"))!=null&&h.hasError("minlength")&&((h=e.form.get("contrasena"))!=null&&h.touched)?27:-1),r(),a(28,e.errorLogin()?28:-1),r(),C("disabled",e.form.invalid||e.cargando()),r(),a(30,e.cargando()?30:31)}},dependencies:[L,B,w,P,T,N,D,R,U,q,H,V,O,A,G,W,Q,z,J,K,Y,X,tt,Z,$,it,et,nt,ot],styles:[".login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:32px;border-radius:12px}"]})}}return t})();export{kt as LoginComponent};
