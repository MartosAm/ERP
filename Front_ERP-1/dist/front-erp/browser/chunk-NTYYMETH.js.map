{
  "version": 3,
  "sources": ["src/app/core/services/dashboard.service.ts", "src/app/features/dashboard/dashboard.component.ts", "src/app/features/dashboard/dashboard.component.html"],
  "sourcesContent": ["/**\n * core/services/dashboard.service.ts\n * ------------------------------------------------------------------\n * Servicio de dashboard. Solo obtiene KPIs en tiempo real.\n * Para reportes detallados, usar ReportesService.\n * ------------------------------------------------------------------\n */\nimport { Injectable, inject } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiService } from './api.service';\nimport type { DashboardData } from '../models/api.model';\n\n@Injectable({ providedIn: 'root' })\nexport class DashboardService {\n  private readonly api = inject(ApiService);\n\n  obtenerKPIs(): Observable<DashboardData> {\n    return this.api.get<DashboardData>('reportes/dashboard');\n  }\n}\n", "import { Component, inject, OnInit, signal, DestroyRef } from '@angular/core';\nimport { CommonModule, DecimalPipe, CurrencyPipe, DatePipe } from '@angular/common';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { DashboardService } from '../../core/services/dashboard.service';\nimport { NotificationService } from '../../core/services/notification.service';\nimport type { DashboardData } from '../../core/models/api.model';\n\n@Component({\n  selector: 'app-dashboard',\n  standalone: true,\n  imports: [\n    CommonModule, DecimalPipe, CurrencyPipe, DatePipe,\n    MatCardModule, MatIconModule, MatProgressSpinnerModule,\n    MatButtonModule, MatDividerModule,\n  ],\n  templateUrl: './dashboard.component.html',\n  styleUrl: './dashboard.component.css',\n})\nexport class DashboardComponent implements OnInit {\n  private readonly dashSvc = inject(DashboardService);\n  private readonly notify = inject(NotificationService);\n  private readonly destroyRef = inject(DestroyRef);\n\n  readonly data = signal<DashboardData | null>(null);\n  readonly cargando = signal(false);\n\n  ngOnInit(): void {\n    this.cargar();\n  }\n\n  cargar(): void {\n    this.cargando.set(true);\n    this.dashSvc\n      .obtenerKPIs()\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe({\n        next: (kpis: DashboardData) => {\n          this.data.set(kpis);\n          this.cargando.set(false);\n        },\n        error: () => {\n          this.cargando.set(false);\n          this.notify.error('No se pudieron cargar los KPIs');\n        },\n      });\n  }\n}\n", "<!-- dashboard.component.html — KPIs principales del sistema -->\n<div class=\"page-container\">\n  <div class=\"flex items-center justify-between mb-6\">\n    <h1 class=\"text-2xl font-bold text-gray-800\">Dashboard</h1>\n    <button mat-icon-button (click)=\"cargar()\" title=\"Actualizar\">\n      <mat-icon>refresh</mat-icon>\n    </button>\n  </div>\n\n  @if (cargando()) {\n    <div class=\"flex justify-center py-20\">\n      <mat-spinner diameter=\"48\" />\n    </div>\n  } @else if (data()) {\n    <!-- KPI principales -->\n    <div class=\"kpi-grid\">\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Ventas hoy</span>\n        <span class=\"kpi-value\">{{ data()!.ventasHoy.total | currency:'$' }}</span>\n        <span class=\"text-xs text-gray-400\">\n          {{ data()!.ventasHoy.cantidad }} órdenes · Ticket: {{ data()!.ventasHoy.ticketPromedio | currency:'$' }}\n        </span>\n      </div>\n\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Ventas del mes</span>\n        <span class=\"kpi-value\">{{ data()!.ventasMes.total | currency:'$' }}</span>\n        <span class=\"kpi-change\"\n              [class.positive]=\"data()!.ventasMes.variacionVsMesAnterior >= 0\"\n              [class.negative]=\"data()!.ventasMes.variacionVsMesAnterior < 0\">\n          {{ data()!.ventasMes.variacionVsMesAnterior >= 0 ? '+' : '' }}{{ data()!.ventasMes.variacionVsMesAnterior | number:'1.1-1' }}% vs mes anterior\n        </span>\n      </div>\n\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Utilidad bruta</span>\n        <span class=\"kpi-value\">{{ data()!.utilidad.utilidadBruta | currency:'$' }}</span>\n        <span class=\"kpi-change positive\">Margen: {{ data()!.utilidad.margenPorcentaje | number:'1.1-1' }}%</span>\n      </div>\n\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Productos stock bajo</span>\n        <span class=\"kpi-value\" [class.text-red-600]=\"data()!.productosStockBajo > 0\">\n          {{ data()!.productosStockBajo }}\n        </span>\n        <span class=\"text-xs text-gray-400\">Requieren reposición</span>\n      </div>\n    </div>\n\n    <!-- Segunda fila -->\n    <div class=\"kpi-grid\">\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Cotizaciones pendientes</span>\n        <span class=\"kpi-value\">{{ data()!.cotizaciones.pendientes }}</span>\n        <span class=\"text-xs text-gray-400\">\n          Valor: {{ data()!.cotizaciones.valorPendiente | currency:'$' }}\n        </span>\n      </div>\n\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Devoluciones (mes)</span>\n        <span class=\"kpi-value\">{{ data()!.devoluciones.mes.cantidad }}</span>\n        <span class=\"text-xs text-gray-400\">\n          {{ data()!.devoluciones.mes.total | currency:'$' }} · Hoy: {{ data()!.devoluciones.hoy.cantidad }}\n        </span>\n      </div>\n\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Compras del mes</span>\n        <span class=\"kpi-value\">{{ data()!.comprasMes.total | currency:'$' }}</span>\n        <span class=\"text-xs text-gray-400\">{{ data()!.comprasMes.cantidad }} órdenes de compra</span>\n      </div>\n\n      <div class=\"kpi-card\">\n        <span class=\"kpi-label\">Entregas pendientes</span>\n        <span class=\"kpi-value\">{{ data()!.ordenesPendientesEntrega }}</span>\n        <span class=\"text-xs text-gray-400\">Turnos abiertos: {{ data()!.turnosAbiertos }}</span>\n      </div>\n    </div>\n\n    <!-- Info del sistema -->\n    <div class=\"card mt-4\">\n      <div class=\"flex items-center gap-4 text-sm text-gray-500\">\n        <span>\n          <mat-icon class=\"text-base align-middle\">schedule</mat-icon>\n          Actualizado: {{ data()!.generadoEn | date:'HH:mm:ss' }}\n        </span>\n        <span>\n          <mat-icon class=\"text-base align-middle\">people</mat-icon>\n          Sesiones activas: {{ data()!.sesionesActivas }}\n        </span>\n      </div>\n    </div>\n  }\n</div>\n"],
  "mappings": "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",
  "names": []
}
